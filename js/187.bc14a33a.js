"use strict";(self["webpackChunkhello"]=self["webpackChunkhello"]||[]).push([[187],{1187:function(t,s,a){a.r(s),a.d(s,{default:function(){return d}});var e=function(){var t=this,s=t._self._c;return s("div",[t.dataList.length?s("ul",{staticClass:"filmsDetail"},t._l(t.dataList,(function(a){return s("li",{key:a.filmId,on:{click:function(s){return t.handleChangePage(a.filmId)}}},[s("img",{attrs:{src:a.poster,alt:""}}),s("div",{staticClass:"FilmInformation"},[s("div",[s("span",{staticClass:"name"},[t._v(t._s(a.name)+" ")]),s("span",{staticClass:"item"},[t._v(t._s(a.filmType.name))])]),s("div",[s("span",{staticClass:"label"},[t._v("观众评分 "),s("span",{staticStyle:{color:"#ffb232"}},[t._v(t._s(a.grade))])])]),s("div",[s("span",{staticClass:"label"},[t._v("主演："),a.actors?s("span",[t._v(t._s(t._f("actors")(a.actors)))]):s("span",[t._v("暂无人员")])])]),s("div",[s("span",{staticClass:"label"},[t._v(t._s(a.nation)+" | "+t._s(a.runtime)+"分钟")])])]),s("div",{staticClass:"buy",on:{click:function(s){return t.buyTicket(a.filmId,a.name)}}},[t._v("购票")])])})),0):t._e(),t.show?s("div",{staticClass:"noMore"},[t._v("暂无更多")]):t._e()])},i=[],n=a(8430),l=a(144);l["default"].filter("actors",(t=>t.map((t=>t.name)).join(" ")));var r={data(){return{dataList:[],page:1,tag:!0,show:!0}},methods:{buyTicket(t,s){this.$store.commit("setFilmId",t),this.$router.push({name:"电影视图",params:{filmName:s,myID:t}})},handleChangePage(t){this.$router.push({name:"详情",params:{myID:t}})},sendRequest(t){return(0,n.Z)({url:`/gateway?cityId=${this.$store.state.cityId}&pageNum=${this.page++}&pageSize=10&type=1&k=70052`,headers:{"X-Host":"mall.film-ticket.film.list"}}).then((s=>{this.dataList.push(...s.data.data.films),this.dataList.length===s.data.data.total&&(this.tag=!1,t?.disconnect())}))}},mounted(){(async()=>{await this.sendRequest(),this.$nextTick((()=>{const t=document.querySelector(".noMore"),s=new IntersectionObserver((t=>{t[0].isIntersecting&&this.tag&&this.sendRequest(s)}),{root:null,thresholds:1,rootMargin:"0px 0px 300px 0px"});s.observe(t)}))})()}},o=r,c=a(1001),u=(0,c.Z)(o,e,i,!1,null,"37625fee",null),d=u.exports}}]);
//# sourceMappingURL=187.bc14a33a.js.map