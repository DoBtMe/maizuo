"use strict";(self["webpackChunkhello"]=self["webpackChunkhello"]||[]).push([[375],{5939:function(t,e,n){n.r(e),n.d(e,{default:function(){return B}});var i=function(){var t=this,e=t._self._c;return t.cityList.length?e("div",[e("div",{staticClass:"city-list"},[e("div",{staticClass:"header"},[e("span",{staticClass:"i",on:{click:function(e){return t.$router.back()}}},[e("van-icon",{attrs:{name:"cross"}})],1),e("span",[t._v("当前城市 - "+t._s(this.$store.state.cityName))]),t._v(" "),e("span")]),e("van-search",{attrs:{placeholder:"请输入搜索关键词","show-action":t.show},on:{focus:function(e){t.show=!0}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),e("div",{staticClass:"container"},[t.value?t._l(t.filterCity(),(function(n){return e("van-cell",{key:n.cityId,attrs:{title:n.name},on:{click:function(e){return t.selectCity(n)}}})})):e("van-index-bar",{attrs:{"index-list":t.computedList,"highlight-color":"green"},on:{select:t.currrenIndex}},t._l(t.cityList,(function(n,i){return e("div",{key:i},[e("van-index-anchor",{attrs:{index:n.type}}),t._l(n.newList,(function(n){return e("van-cell",{key:n.cityId,attrs:{title:n.name},on:{click:function(e){return t.selectCity(n)}}})}))],2)})),0)],2)]):t._e()},r=[],o=(n(8479),n(9146)),c=(n(3307),n(1392)),s=(n(1958),n(3332),n(6742),n(3094),n(9233)),l=n(2787),h=n(6108),a=n(1541),u=n(1750),d=(0,l.d)("index-anchor"),f=d[0],p=d[1],v=f({mixins:[(0,h.j)("vanIndexBar",{indexKey:"childrenIndex"})],props:{index:[Number,String]},data:function(){return{top:0,left:null,rect:{top:0,height:0},width:null,active:!1}},computed:{sticky:function(){return this.active&&this.parent.sticky},anchorStyle:function(){if(this.sticky)return{zIndex:""+this.parent.zIndex,left:this.left?this.left+"px":null,width:this.width?this.width+"px":null,transform:"translate3d(0, "+this.top+"px, 0)",color:this.parent.highlightColor}}},mounted:function(){var t=this.$el.getBoundingClientRect();this.rect.height=t.height},methods:{scrollIntoView:function(){this.$el.scrollIntoView()},getRect:function(t,e){var n=this.$el,i=n.getBoundingClientRect();return this.rect.height=i.height,t===window||t===document.body?this.rect.top=i.top+(0,u.oD)():this.rect.top=i.top+(0,u.cx)(t)-e.top,this.rect}},render:function(){var t,e=arguments[0],n=this.sticky;return e("div",{style:{height:n?this.rect.height+"px":null}},[e("div",{style:this.anchorStyle,class:[p({sticky:n}),(t={},t[a.xe]=n,t)]},[this.slots("default")||this.index])])}}),m=n(8546),y=n(591),x=n(5566),g=n(4611),k=n(9045);function C(){for(var t=[],e="A".charCodeAt(0),n=0;n<26;n++)t.push(String.fromCharCode(e+n));return t}var I=(0,l.d)("index-bar"),w=I[0],b=I[1],$=w({mixins:[g.D,(0,h.G)("vanIndexBar"),(0,k.X)((function(t){this.scroller||(this.scroller=(0,u.Ob)(this.$el)),t(this.scroller,"scroll",this.onScroll)}))],props:{zIndex:[Number,String],highlightColor:String,sticky:{type:Boolean,default:!0},stickyOffsetTop:{type:Number,default:0},indexList:{type:Array,default:C}},data:function(){return{activeAnchorIndex:null}},computed:{sidebarStyle:function(){if((0,m.Xq)(this.zIndex))return{zIndex:this.zIndex+1}},highlightStyle:function(){var t=this.highlightColor;if(t)return{color:t}}},watch:{indexList:function(){this.$nextTick(this.onScroll)},activeAnchorIndex:function(t){t&&this.$emit("change",t)}},methods:{onScroll:function(){var t=this;if(!(0,y.x)(this.$el)){var e=(0,u.cx)(this.scroller),n=this.getScrollerRect(),i=this.children.map((function(e){return e.getRect(t.scroller,n)})),r=this.getActiveAnchorIndex(e,i);this.activeAnchorIndex=this.indexList[r],this.sticky&&this.children.forEach((function(o,c){if(c===r||c===r-1){var s=o.$el.getBoundingClientRect();o.left=s.left,o.width=s.width}else o.left=null,o.width=null;if(c===r)o.active=!0,o.top=Math.max(t.stickyOffsetTop,i[c].top-e)+n.top;else if(c===r-1){var l=i[r].top-e;o.active=l>0,o.top=l+n.top-i[c].height}else o.active=!1}))}},getScrollerRect:function(){return this.scroller.getBoundingClientRect?this.scroller.getBoundingClientRect():{top:0,left:0}},getActiveAnchorIndex:function(t,e){for(var n=this.children.length-1;n>=0;n--){var i=n>0?e[n-1].height:0,r=this.sticky?i+this.stickyOffsetTop:0;if(t+r>=e[n].top)return n}return-1},onClick:function(t){this.scrollToElement(t.target)},onTouchMove:function(t){if(this.touchMove(t),"vertical"===this.direction){(0,x.PF)(t);var e=t.touches[0],n=e.clientX,i=e.clientY,r=document.elementFromPoint(n,i);if(r){var o=r.dataset.index;this.touchActiveIndex!==o&&(this.touchActiveIndex=o,this.scrollToElement(r))}}},scrollTo:function(t){var e=this.children.filter((function(e){return String(e.index)===t}));e[0]&&(e[0].scrollIntoView(),this.sticky&&this.stickyOffsetTop&&(0,u.kn)((0,u.oD)()-this.stickyOffsetTop),this.$emit("select",e[0].index))},scrollToElement:function(t){var e=t.dataset.index;this.scrollTo(e)},onTouchEnd:function(){this.active=null}},render:function(){var t=this,e=arguments[0],n=this.indexList.map((function(n){var i=n===t.activeAnchorIndex;return e("span",{class:b("index",{active:i}),style:i?t.highlightStyle:null,attrs:{"data-index":n}},[n])}));return e("div",{class:b()},[e("div",{class:b("sidebar"),style:this.sidebarStyle,on:{click:this.onClick,touchstart:this.touchStart,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchEnd}},[n]),this.slots("default")])}}),S=(n(9432),n(7722)),T=n(8430),L={data(){return{value:"",cityList:[],searchList:[],show:!1}},components:{[S.Z.name]:S.Z,[$.name]:$,[v.name]:v,[s.Z.name]:s.Z,[c.Z.name]:c.Z},mounted(){(0,T.Z)({url:"/gateway?cityId=130600&ticketFlag=1&k=1173969",headers:{"X-Host":"mall.film-ticket.city.list"}}).then((t=>{this.searchList=t.data.data.cities,this.cityList=this.cityFilter(t.data.data.cities),this.$nextTick((()=>{}))}))},computed:{computedList(){return this.cityList.map((t=>t.type))}},methods:{filterCity(){return this.searchList.filter((t=>t.name.toUpperCase().includes(this.value.toUpperCase())||t.pinyin.toUpperCase().includes(this.value.toUpperCase())))},selectCity(t){this.$store.commit("selectCity"),this.$store.commit("changeCityId",t.cityId),this.$store.commit("changeCityName",t.name),this.$router.back()},currrenIndex(t){(0,o.Z)({message:t,duration:1e3})},cityFilter(t){let e=[],n=[];for(let i=65;i<91;i++)n.push(String.fromCharCode(i));return n.forEach((n=>{let i=t.filter((t=>t.pinyin[0].toUpperCase()===n));i.length>0&&e.push({type:n,newList:[...i]})})),[...e]}}},R=L,A=n(1001),O=(0,A.Z)(R,i,r,!1,null,"1fdd7fa5",null),B=O.exports},3307:function(t,e,n){n(1958),n(3332),n(6742)},6108:function(t,e,n){function i(t){var e=[];function n(t){t.forEach((function(t){e.push(t),t.componentInstance&&n(t.componentInstance.$children.map((function(t){return t.$vnode}))),t.children&&n(t.children)}))}return n(t),e}function r(t,e){var n=e.$vnode.componentOptions;if(n&&n.children){var r=i(n.children);t.sort((function(t,e){return r.indexOf(t.$vnode)-r.indexOf(e.$vnode)}))}}function o(t,e){var n,i;void 0===e&&(e={});var o=e.indexKey||"index";return{inject:(n={},n[t]={default:null},n),computed:(i={parent:function(){return this.disableBindRelation?null:this[t]}},i[o]=function(){return this.bindRelation(),this.parent?this.parent.children.indexOf(this):null},i),watch:{disableBindRelation:function(t){t||this.bindRelation()}},mounted:function(){this.bindRelation()},beforeDestroy:function(){var t=this;this.parent&&(this.parent.children=this.parent.children.filter((function(e){return e!==t})))},methods:{bindRelation:function(){if(this.parent&&-1===this.parent.children.indexOf(this)){var t=[].concat(this.parent.children,[this]);r(t,this.parent),this.parent.children=t}}}}}function c(t){return{provide:function(){var e;return e={},e[t]=this,e},data:function(){return{children:[]}}}}n.d(e,{j:function(){return o},G:function(){return c}})},1541:function(t,e,n){n.d(e,{_K:function(){return s},a8:function(){return o},k7:function(){return r},r5:function(){return l},xe:function(){return c}});var i="van-hairline",r=i+"--top",o=i+"--left",c=i+"--bottom",s=i+"--surround",l=i+"--top-bottom"},591:function(t,e,n){function i(t){var e=window.getComputedStyle(t),n="none"===e.display,i=null===t.offsetParent&&"fixed"!==e.position;return n||i}n.d(e,{x:function(){return i}})}}]);
//# sourceMappingURL=375.79d2473b.js.map