{"version":3,"file":"js/333.5d872c52.js","mappings":"sJAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACA,EAAG,KAAK,CAACE,YAAY,eAAeJ,EAAIK,GAAIL,EAAIM,UAAU,SAASC,GAAM,OAAOL,EAAG,KAAK,CAACM,IAAID,EAAKE,OAAOC,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOX,EAAIY,iBAAiBL,EAAKE,OAAQ,IAAG,CAACP,EAAG,MAAM,CAACW,MAAM,CAAC,IAAMN,EAAKO,OAAO,IAAM,MAAMZ,EAAG,MAAM,CAACE,YAAY,mBAAmB,CAACF,EAAG,MAAM,CAACA,EAAG,OAAO,CAACE,YAAY,QAAQ,CAACJ,EAAIe,GAAGf,EAAIgB,GAAGT,EAAKU,MAAM,OAAOf,EAAG,OAAO,CAACE,YAAY,QAAQ,CAACJ,EAAIe,GAAGf,EAAIgB,GAAGT,EAAKW,SAASD,WAAWf,EAAG,MAAM,CAACA,EAAG,OAAO,CAACE,YAAY,SAAS,CAACJ,EAAIe,GAAG,OAAQR,EAAKY,OAAQjB,EAAG,OAAO,CAACF,EAAIe,GAAGf,EAAIgB,GAAGhB,EAAIoB,GAAG,SAAPpB,CAAiBO,EAAKY,YAAYjB,EAAG,OAAO,CAACF,EAAIe,GAAG,cAAcb,EAAG,MAAM,CAACE,YAAY,SAAS,CAACJ,EAAIe,GAAG,SAASf,EAAIgB,GAAGhB,EAAIoB,GAAG,aAAPpB,CAAsC,IAAhBO,EAAKc,aAAmB,SAAUd,EAAKe,UAAWpB,EAAG,MAAM,CAACE,YAAY,OAAO,CAACJ,EAAIe,GAAG,QAAQf,EAAIuB,MAAO,IAAE,GAAIvB,EAAIwB,KAAMtB,EAAG,MAAM,CAACE,YAAY,UAAU,CAACJ,EAAIe,GAAG,WAAWf,EAAIuB,MACz4B,EACGE,EAAkB,G,qCCgCtBC,EAAAA,WAAAA,OAAW,UAAU,GACrB,+BAEAA,EAAAA,WAAAA,OAAW,cAAc,IACzB,sBACA,cACA,eACA,aACA,OAAQC,GACR,OACA,WACA,OACA,WACA,OACA,WACA,OACA,WACA,OACA,WACA,OACA,WACA,OACA,WAEA,CAjBA,GAkBA,OACAC,EAAAA,KAAAA,EAAAA,WAAAA,GAAAA,IAAAA,EAAAA,UAAAA,GADA,IAIA,OACAC,OACA,OACAvB,SAAAA,GACAwB,KAAAA,EACAC,KAAAA,EACAP,MAAAA,EAEA,EACAQ,QAAAA,CACApB,iBAAAA,GASA,iCACA,mBACAK,KAAAA,KACAgB,OAAAA,CAGAC,KAAAA,IAGA,EACAC,cACA,aACAC,EAAAA,EAAAA,GAAAA,CAGAC,IAAAA,mBAAAA,KAAAA,OAAAA,MAAAA,kBAAAA,KAAAA,mCACAC,QAAAA,CACA,yCAEAC,MAAAC,IACA,yCACA,yCACA,aAEA,YACA,GAEA,GAEAC,UACA,mBACA,iCACAC,OAAAA,SAAAA,KAEAC,EAAAA,aAAAA,EAAAA,aAAAA,IAAAA,EAAAA,WACA,UAGA,kBACA,CAEA,EACAC,gBACAF,OAAAA,SAAAA,IACA,GC9HmQ,I,UCQ/PG,GAAY,OACd,EACA9C,EACA0B,GACA,EACA,KACA,WACA,MAIF,EAAeoB,EAAiB,O","sources":["webpack://hello/./src/views/Films/comingsoon.vue","webpack://hello/src/views/Films/comingsoon.vue","webpack://hello/./src/views/Films/comingsoon.vue?9a8b","webpack://hello/./src/views/Films/comingsoon.vue?0ea8"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('ul',{staticClass:\"filmsDetail\"},_vm._l((_vm.dataList),function(item){return _c('li',{key:item.filmId,on:{\"click\":function($event){return _vm.handleChangePage(item.filmId)}}},[_c('img',{attrs:{\"src\":item.poster,\"alt\":\"\"}}),_c('div',{staticClass:\"FilmInformation\"},[_c('div',[_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(item.name)+\" \")]),_c('span',{staticClass:\"item\"},[_vm._v(_vm._s(item.filmType.name))])]),_c('div',[_c('span',{staticClass:\"label\"},[_vm._v(\"主演：\"),(item.actors)?_c('span',[_vm._v(_vm._s(_vm._f(\"actors\")(item.actors)))]):_c('span',[_vm._v(\"暂无人员\")])])]),_c('div',{staticClass:\"label\"},[_vm._v(\" 上映日期：\"+_vm._s(_vm._f(\"dateFilter\")((item.premiereAt*1000)))+\" \")])]),(item.isPresale)?_c('div',{staticClass:\"buy\"},[_vm._v(\"预售\")]):_vm._e()])}),0),(_vm.show)?_c('div',{staticClass:\"noMore\"},[_vm._v(\"无更多电影\")]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <ul class=\"filmsDetail\" >\r\n      <li\r\n        v-for=\"item in dataList\"\r\n        :key=\"item.filmId\"\r\n        @click=\"handleChangePage(item.filmId)\"\r\n      >\r\n        <img :src=\"item.poster\" alt=\"\" />\r\n        <div class=\"FilmInformation\">\r\n          <div>\r\n            <span class=\"name\">{{ item.name }} </span\r\n            ><span class=\"item\">{{ item.filmType.name }}</span>\r\n          </div>\r\n          <div>\r\n            <span class=\"label\"\r\n              >主演：<span v-if=\"item.actors\">{{ item.actors | actors }}</span\r\n              ><span v-else>暂无人员</span></span\r\n            >\r\n          </div>\r\n          <div class=\"label\">\r\n            上映日期：{{(item.premiereAt*1000) | dateFilter}}\r\n          </div>\r\n        </div>\r\n        <div class=\"buy\" v-if=\"item.isPresale\">预售</div>\r\n      </li>\r\n    </ul>\r\n    <div v-if=\"show\" class=\"noMore\">无更多电影</div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport moment from 'moment'\r\nimport http from \"@/util/http.js\";\r\nimport Vue from \"vue\";\r\nVue.filter(\"actors\", (v) => {\r\n  return v.map((item) => item.name).join(\" \");\r\n});\r\nVue.filter(\"dateFilter\", (data) => {\r\n  let time = moment(data).format();\r\n  let d = new Date(time);\r\n  let week = moment(data).day()\r\n  let getWeet =(function(){\r\nswitch (week) {\r\n        case 1:\r\n          return '周一'\r\n        case 2:\r\n          return '周二'\r\n        case 3:\r\n          return '周三'\r\n        case 4:\r\n          return '周四'\r\n        case 5:\r\n          return '周五'\r\n        case 6:\r\n          return '周六'\r\n        case 0:\r\n          return '周日'\r\n      }\r\n  })()\r\n  return (\r\n     getWeet+' '+ (d.getMonth() + 1) + \"月\" + d.getDate() + \"日\"\r\n  );\r\n});\r\nexport default {\r\n  data() {\r\n    return {\r\n      dataList: [],\r\n      page: 1,\r\n      tag: true,\r\n      show:false\r\n    };\r\n  },\r\n  methods: {\r\n    handleChangePage(id) {\r\n      // 编程式导航\r\n      // location.href = '#/detail'     可能会出问题\r\n\r\n      // 这里的this.$router是main中的router模块\r\n      // 1.通过路由跳转\r\n      // this.$router.push(`/detail/${id}`)\r\n\r\n      // 2.通过路由命名跳转\r\n      this.$store.commit('footerHide')\r\n      this.$router.push({\r\n        name: \"详情\", //跳往组件的名字\r\n        params: {\r\n          //跳往的path\r\n          //es6 成对象属性    这里的id必须和动态路由那里一样\r\n          myID: id,\r\n        },\r\n      });\r\n    },\r\n    sendRequest() {\r\n      this.tag = false;\r\n      http({\r\n        // 这里不需要再写请求地址了\r\n        \r\n        url: `/gateway?cityId=${this.$store.state.cityId}&pageNum=${this.page++}&pageSize=10&type=2&k=2116`,\r\n        headers: {\r\n          \"X-Host\": \"mall.film-ticket.film.list\",\r\n        },\r\n      }).then((res) => {\r\n        if (this.dataList.length!=res.data.data.total) {\r\n          this.dataList.push(...res.data.data.films)\r\n          this.tag = true;\r\n          }else {\r\n            this.show = true;\r\n          }\r\n      });\r\n    },\r\n  },\r\n  mounted() {\r\n    this.sendRequest();\r\n    const html = document.documentElement;\r\n    window.onscroll = ()=> {\r\n      if (\r\n        html.scrollHeight - html.clientHeight - 40 <= html.scrollTop &&\r\n        this.tag\r\n      ) {\r\n        \r\n        this.sendRequest();\r\n      }\r\n    };\r\n  },\r\n    beforeDestroy(){\r\n      window.onscroll =null;\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.filmsDetail li {\r\n  background-color: #fff;\r\n  height: 7.75rem;\r\n  padding: .9375rem;\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  align-items: center;\r\n  img {\r\n    // height: ;\r\n    width: 4.125rem;\r\n  }\r\n  .FilmInformation {\r\n    padding: 0 .625rem;\r\n    box-sizing: border-box;\r\n    width: 15.25rem;\r\n    .name {\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n      white-space: nowrap;\r\n      display: inline-block;\r\n      margin-right: 5px;\r\n      color: #191a1b;\r\n      max-width: 12.4375rem;\r\n      vertical-align: middle;\r\n    }\r\n    .item {\r\n      display: inline-block;\r\n      font-size: 12px;\r\n      color: #fff;\r\n      background-color: #d2d6dc;\r\n      height: 14px;\r\n      line-height: 14px;\r\n      padding: 0 2px;\r\n      border-radius: 2px;\r\n      vertical-align: middle;\r\n    }\r\n    div {\r\n      overflow: hidden;\r\n      text-overflow: ellipsis;\r\n      white-space: nowrap;\r\n      width: 14rem;\r\n    }\r\n  }\r\n  .label {\r\n    font-size: .8125rem;\r\n    color: #797d82;\r\n  }\r\n}\r\n.buy {\r\n  flex: 1;\r\n  height: 1.5625rem;\r\n  border: 1px solid rgb(0,188,0);\r\n  line-height: 1.5625rem;\r\n  color: rgb(0,188,0);\r\n  font-size: 13px;\r\n  text-align: center;\r\n  border-radius: 2px;\r\n}\r\n.noMore{\r\n  height: 3.6875rem;\r\n    background-color: #ededed;\r\n    color: #bdc0c5;\r\n    font-size: .8125rem;\r\n    text-align: center;\r\n    margin: auto;\r\n    line-height: 3.6875rem;\r\n\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./comingsoon.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./comingsoon.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./comingsoon.vue?vue&type=template&id=e7574c6a&scoped=true&\"\nimport script from \"./comingsoon.vue?vue&type=script&lang=js&\"\nexport * from \"./comingsoon.vue?vue&type=script&lang=js&\"\nimport style0 from \"./comingsoon.vue?vue&type=style&index=0&id=e7574c6a&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"e7574c6a\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","_l","dataList","item","key","filmId","on","$event","handleChangePage","attrs","poster","_v","_s","name","filmType","actors","_f","premiereAt","isPresale","_e","show","staticRenderFns","Vue","week","getWeet","data","page","tag","methods","params","myID","sendRequest","http","url","headers","then","res","mounted","window","html","beforeDestroy","component"],"sourceRoot":""}